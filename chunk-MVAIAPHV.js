import{b as k,c as q}from"./chunk-2V7ITQDO.js";import{a as H,b as Y,c as z,d as J,f as K,g as Q}from"./chunk-3YUSJBQI.js";import{b as F,d as p,f as x,g as N,j as y,k as A,l as T,m as j,n as V,o as w,q as B,s as D,t as G,u as L,y as O,z as P}from"./chunk-KXMWBQJZ.js";import{a as X}from"./chunk-C6H2JVRG.js";import{a as U}from"./chunk-IXEVMI5O.js";import{a as W}from"./chunk-YJZHBP62.js";import{Ba as c,Cb as g,Fb as M,Hc as R,Ic as $,Ja as r,Ka as e,La as C,Lb as S,Nb as E,Ra as b,Sa as I,ab as n,db as _,ja as m,na as l,sa as v,xa as h}from"./chunk-T7TK6TUY.js";function Z(i,f){if(i&1&&(r(0,"mat-card-subtitle"),n(1),e()),i&2){let o=I();m(),_(" ",o.nombreAlumno," - ",o.nombreCurso," ")}}function tt(i,f){i&1&&(r(0,"mat-error"),n(1," La calificaci\xF3n es requerida "),e())}function it(i,f){i&1&&(r(0,"mat-error"),n(1," La calificaci\xF3n m\xEDnima es 0 "),e())}function et(i,f){i&1&&(r(0,"mat-error"),n(1," La calificaci\xF3n m\xE1xima es 5 "),e())}var _t=(()=>{class i{constructor(o,a,t,s,u,d){this.fb=o,this.route=a,this.router=t,this.notasService=s,this.alumnosService=u,this.cursosService=d,this.alumnoId=null,this.cursoId=null,this.nombreAlumno="",this.nombreCurso="",this.notaForm=this.fb.group({calificacion:["",[p.required,p.min(0),p.max(5)]]})}ngOnInit(){if(this.alumnoId=Number(this.route.snapshot.paramMap.get("alumnoId")),this.cursoId=Number(this.route.snapshot.paramMap.get("cursoId")),this.alumnoId&&this.cursoId){let o=this.alumnosService.getAlumnoById(this.alumnoId),a=this.cursosService.getCursoById(this.cursoId);if(o&&a){this.nombreAlumno=`${o.nombre} ${o.apellido}`,this.nombreCurso=a.nombre;let t=this.notasService.getNotaPorAlumnoYCurso(this.alumnoId,this.cursoId);t&&this.notaForm.patchValue({calificacion:t.calificacion})}else this.router.navigate(["/notas"])}else this.router.navigate(["/notas"])}onSubmit(){this.notaForm.valid&&this.alumnoId&&this.cursoId&&(this.notasService.guardarNota({alumnoId:this.alumnoId,cursoId:this.cursoId,calificacion:this.notaForm.value.calificacion}),this.router.navigate(["/notas"]))}cancelar(){this.router.navigate(["/notas"])}static{this.\u0275fac=function(a){return new(a||i)(l(B),l(S),l(E),l(X),l(U),l(W))}}static{this.\u0275cmp=v({type:i,selectors:[["app-editar-nota"]],decls:20,vars:6,consts:[[1,"container"],[4,"ngIf"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","number","formControlName","calificacion","min","0","max","5","step","0.1"],[1,"button-container"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(a,t){if(a&1&&(r(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),n(4,"Calificar Alumno"),e(),h(5,Z,2,2,"mat-card-subtitle",1),e(),r(6,"mat-card-content")(7,"form",2),b("ngSubmit",function(){return t.onSubmit()}),r(8,"mat-form-field",3)(9,"mat-label"),n(10,"Calificaci\xF3n"),e(),C(11,"input",4),h(12,tt,2,0,"mat-error",1)(13,it,2,0,"mat-error",1)(14,et,2,0,"mat-error",1),e(),r(15,"div",5)(16,"button",6),b("click",function(){return t.cancelar()}),n(17,"Cancelar"),e(),r(18,"button",7),n(19," Guardar Calificaci\xF3n "),e()()()()()()),a&2){let s,u,d;m(5),c("ngIf",t.nombreAlumno&&t.nombreCurso),m(2),c("formGroup",t.notaForm),m(5),c("ngIf",(s=t.notaForm.get("calificacion"))==null?null:s.hasError("required")),m(),c("ngIf",(u=t.notaForm.get("calificacion"))==null?null:u.hasError("min")),m(),c("ngIf",(d=t.notaForm.get("calificacion"))==null?null:d.hasError("max")),m(4),c("disabled",!t.notaForm.valid)}},dependencies:[M,g,D,y,F,A,x,N,w,V,T,j,P,O,G,L,q,k,$,R,Q,H,z,K,J,Y],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:600px;margin:0 auto}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}"]})}}return i})();export{_t as EditarNotaComponent};
