import{a as h}from"./chunk-IXEVMI5O.js";import{a as l}from"./chunk-YJZHBP62.js";import{J as p,M as t,a as o,b as a,h as u,k as r}from"./chunk-T7TK6TUY.js";var f=(()=>{class n{constructor(i,s){this.cursosService=i,this.alumnosService=s,this.STORAGE_KEY="inscripciones",this.inscripcionesSubject=new u([]),this.cargarInscripciones()}cargarInscripciones(){let i=localStorage.getItem(this.STORAGE_KEY);if(i){let s=JSON.parse(i);this.inscripcionesSubject.next(s.map(e=>a(o({},e),{fechaInscripcion:new Date(e.fechaInscripcion)})))}}guardarInscripciones(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.inscripcionesSubject.value))}generarNuevoId(){let i=this.inscripcionesSubject.value;return i.length>0?Math.max(...i.map(s=>s.id))+1:1}getInscripciones(){return this.inscripcionesSubject.asObservable()}getInscripcionesPorAlumno(i){let s=this.inscripcionesSubject.value.filter(e=>e.alumnoId===i);return r(s)}getInscripcionesPorCurso(i){let s=this.inscripcionesSubject.value.filter(e=>e.cursoId===i);return r(s)}inscribirAlumno(i,s){let e={id:this.generarNuevoId(),cursoId:i,alumnoId:s,fechaInscripcion:new Date},c=[...this.inscripcionesSubject.value,e];return this.inscripcionesSubject.next(c),this.guardarInscripciones(),this.cursosService.agregarAlumno(i,s),this.alumnosService.inscribirEnCurso(s,i),r(void 0)}desinscribirAlumno(i,s){let e=this.inscripcionesSubject.value.filter(c=>!(c.cursoId===i&&c.alumnoId===s));return this.inscripcionesSubject.next(e),this.guardarInscripciones(),this.cursosService.removerAlumno(i,s),this.alumnosService.desinscribirDeCurso(s,i),r(void 0)}estaInscrito(i,s){let e=this.inscripcionesSubject.value.some(c=>c.cursoId===i&&c.alumnoId===s);return r(e)}static{this.\u0275fac=function(s){return new(s||n)(t(l),t(h))}}static{this.\u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{f as a};
