import{J as i,a as n,b as o,h as r}from"./chunk-T7TK6TUY.js";var h=(()=>{class u{constructor(){this.STORAGE_KEY="alumnos",this.alumnosSubject=new r([]),this.cargarAlumnos()}cargarAlumnos(){let s=localStorage.getItem(this.STORAGE_KEY);if(s){let t=JSON.parse(s);this.alumnosSubject.next(t.map(e=>o(n({},e),{fechaNacimiento:new Date(e.fechaNacimiento)})))}else{let t=[{id:1,nombre:"Juan",apellido:"P\xE9rez",email:"juan@example.com",fechaNacimiento:new Date("1995-05-15"),cursos:[]},{id:2,nombre:"Mar\xEDa",apellido:"Gonz\xE1lez",email:"maria@example.com",fechaNacimiento:new Date("1998-08-20"),cursos:[]}];this.alumnosSubject.next(t),this.guardarAlumnos()}}guardarAlumnos(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.alumnosSubject.value))}generarNuevoId(){let s=this.alumnosSubject.value;return s.length>0?Math.max(...s.map(t=>t.id))+1:1}getAlumnos(){return this.alumnosSubject.asObservable()}getAlumnoById(s){return this.alumnosSubject.value.find(t=>t.id===s)}agregarAlumno(s){let t=o(n({},s),{id:this.generarNuevoId(),cursos:[]}),e=[...this.alumnosSubject.value,t];this.alumnosSubject.next(e),this.guardarAlumnos()}actualizarAlumno(s){let t=this.alumnosSubject.value.map(e=>e.id===s.id?s:e);this.alumnosSubject.next(t),this.guardarAlumnos()}eliminarAlumno(s){let t=this.alumnosSubject.value.filter(e=>e.id!==s);this.alumnosSubject.next(t),this.guardarAlumnos()}inscribirEnCurso(s,t){let e=this.alumnosSubject.value.map(a=>a.id===s&&!a.cursos.includes(t)?o(n({},a),{cursos:[...a.cursos,t]}):a);this.alumnosSubject.next(e),this.guardarAlumnos()}desinscribirDeCurso(s,t){let e=this.alumnosSubject.value.map(a=>a.id===s?o(n({},a),{cursos:a.cursos.filter(l=>l!==t)}):a);this.alumnosSubject.next(e),this.guardarAlumnos()}static{this.\u0275fac=function(t){return new(t||u)}}static{this.\u0275prov=i({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})();export{h as a};
