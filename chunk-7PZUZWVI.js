import{Ib as m,J as c,M as n,h as e,k as s,n as l}from"./chunk-T7TK6TUY.js";var f=(()=>{class u{constructor(a){this.http=a,this.apiUrl="http://localhost:3001/usuarios",this.usuarioActualSubject=new e(null),this.usuarioActual$=this.usuarioActualSubject.asObservable(),this.TEST_USERS={admin:{id:1,nombre:"Administrador",email:"admin@admin.com",password:"admin123",rol:"admin",activo:!0},user:{id:2,nombre:"Usuario Regular",email:"usuario@usuario.com",password:"user123",rol:"usuario",activo:!0}};let t=localStorage.getItem("usuario_actual");t&&this.usuarioActualSubject.next(JSON.parse(t))}login(a,t){let r=Object.values(this.TEST_USERS).find(o=>o.email===a&&o.password===t);return r?(localStorage.setItem("usuario_actual",JSON.stringify(r)),this.usuarioActualSubject.next(r),s(r)):this.http.get(`${this.apiUrl}?email=${a}`).pipe(l(o=>{let i=o[0];if(i&&i.password===t&&i.activo)return localStorage.setItem("usuario_actual",JSON.stringify(i)),this.usuarioActualSubject.next(i),i;throw new Error("Credenciales inv\xE1lidas")}))}logout(){localStorage.removeItem("usuario_actual"),this.usuarioActualSubject.next(null)}isAdmin(){return this.usuarioActualSubject.value?.rol==="admin"||!1}isLoggedIn(){return this.usuarioActualSubject.value!==null}getUsuarioActual(){return this.usuarioActualSubject.value}static{this.\u0275fac=function(t){return new(t||u)(n(m))}}static{this.\u0275prov=c({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})();export{f as a};
