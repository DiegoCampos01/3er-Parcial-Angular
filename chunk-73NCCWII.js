import{a as ee}from"./chunk-ZYFWBFSW.js";import{b as P,c as z}from"./chunk-2V7ITQDO.js";import{a as J,b as K,c as Q,f as W,g as X}from"./chunk-3YUSJBQI.js";import{a as Z,b as $}from"./chunk-BSRP6IBA.js";import{c as Y}from"./chunk-VFJUGW5G.js";import"./chunk-BWIHQ5OF.js";import{b as U,d as s,f as N,g as T,j as w,l as V,m as j,p as R,q as A,s as O,t as D,u as G,y as k,z as B}from"./chunk-KXMWBQJZ.js";import"./chunk-62XFUPSB.js";import"./chunk-3UGYG4GW.js";import"./chunk-VH5QYMKE.js";import{Ba as l,Cb as F,Fb as I,Hc as L,Ic as H,Ja as r,K as M,Ka as t,La as f,Lb as y,Nb as x,Ra as C,Rb as q,ab as i,cb as _,ja as m,na as d,sa as E,ta as S,xa as p}from"./chunk-T7TK6TUY.js";function ie(e,c){e&1&&(r(0,"mat-error"),i(1," El nombre es requerido "),t())}function oe(e,c){e&1&&(r(0,"mat-error"),i(1," El email es requerido "),t())}function ae(e,c){e&1&&(r(0,"mat-error"),i(1," Email inv\xE1lido "),t())}function ne(e,c){e&1&&(r(0,"mat-error"),i(1," La contrase\xF1a es requerida "),t())}function me(e,c){e&1&&(r(0,"mat-error"),i(1," El rol es requerido "),t())}var te=(()=>{class e{constructor(n,a,o,u){this.fb=n,this.usuariosService=a,this.router=o,this.route=u,this.editando=!1,this.usuarioId=null,this.usuarioForm=this.fb.group({nombre:["",s.required],email:["",[s.required,s.email]],password:["",s.required],rol:["usuario",s.required],activo:[!0]})}ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n&&(this.editando=!0,this.usuarioId=+n,this.usuariosService.getUsuario(this.usuarioId).subscribe(a=>{this.usuarioForm.patchValue({nombre:a.nombre,email:a.email,rol:a.rol}),this.usuarioForm.get("password")?.clearValidators(),this.usuarioForm.get("password")?.updateValueAndValidity()}))}onSubmit(){if(this.usuarioForm.valid){let n=this.usuarioForm.value;this.editando&&this.usuarioId?this.usuariosService.actualizarUsuario(this.usuarioId,n).subscribe(()=>{this.router.navigate(["/usuarios"])}):this.usuariosService.crearUsuario(n).subscribe(()=>{this.router.navigate(["/usuarios"])})}}cancelar(){this.router.navigate(["/usuarios"])}static{this.\u0275fac=function(a){return new(a||e)(d(A),d(ee),d(x),d(y))}}static{this.\u0275cmp=E({type:e,selectors:[["app-crear-usuario"]],decls:36,vars:9,consts:[[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","nombre","required",""],[4,"ngIf"],["matInput","","formControlName","email","required","","type","email"],["matInput","","formControlName","password","required","","type","password"],["formControlName","rol","required",""],["value","admin"],["value","usuario"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click"]],template:function(a,o){if(a&1&&(r(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),i(3),t()(),r(4,"mat-card-content")(5,"form",0),C("ngSubmit",function(){return o.onSubmit()}),r(6,"mat-form-field",1)(7,"mat-label"),i(8,"Nombre"),t(),f(9,"input",2),p(10,ie,2,0,"mat-error",3),t(),r(11,"mat-form-field",1)(12,"mat-label"),i(13,"Email"),t(),f(14,"input",4),p(15,oe,2,0,"mat-error",3)(16,ae,2,0,"mat-error",3),t(),r(17,"mat-form-field",1)(18,"mat-label"),i(19,"Contrase\xF1a"),t(),f(20,"input",5),p(21,ne,2,0,"mat-error",3),t(),r(22,"mat-form-field",1)(23,"mat-label"),i(24,"Rol"),t(),r(25,"mat-select",6)(26,"mat-option",7),i(27,"Administrador"),t(),r(28,"mat-option",8),i(29,"Usuario"),t()(),p(30,me,2,0,"mat-error",3),t(),r(31,"div",9)(32,"button",10),i(33),t(),r(34,"button",11),C("click",function(){return o.cancelar()}),i(35," Cancelar "),t()()()()()),a&2){let u,h,g,v,b;m(3),_("",o.editando?"Editar":"Crear"," Usuario"),m(2),l("formGroup",o.usuarioForm),m(5),l("ngIf",(u=o.usuarioForm.get("nombre"))==null?null:u.hasError("required")),m(5),l("ngIf",(h=o.usuarioForm.get("email"))==null?null:h.hasError("required")),m(),l("ngIf",(g=o.usuarioForm.get("email"))==null?null:g.hasError("email")),m(5),l("ngIf",(v=o.usuarioForm.get("password"))==null?null:v.hasError("required")),m(9),l("ngIf",(b=o.usuarioForm.get("rol"))==null?null:b.hasError("required")),m(2),l("disabled",!o.usuarioForm.valid),m(),_(" ",o.editando?"Actualizar":"Crear"," ")}},dependencies:[I,F,O,w,U,N,T,R,V,j,B,k,D,G,z,P,$,Z,Y,H,L,X,J,Q,W,K],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}mat-card[_ngcontent-%COMP%]{margin:20px}"]})}}return e})();var le=[{path:"",component:te}],qe=(()=>{class e{static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=M({imports:[q.forChild(le)]})}}return e})();export{qe as CrearUsuarioModule};
