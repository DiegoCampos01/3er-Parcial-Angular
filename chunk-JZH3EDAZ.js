import{a as Y}from"./chunk-W7WUBLB7.js";import{a as j,b as z,c as B,d as F,e as N,f as J,g as q,h as G,i as K,j as Q,k as U}from"./chunk-LHPFZ6HT.js";import{a as V,b as $}from"./chunk-AH55HQJT.js";import{a as W}from"./chunk-IXEVMI5O.js";import{a as X}from"./chunk-YJZHBP62.js";import"./chunk-3UGYG4GW.js";import"./chunk-VH5QYMKE.js";import{Ba as m,Cb as y,D as S,Fb as L,Hc as A,Ic as H,Ja as n,Ka as i,La as M,Lb as T,Ma as d,Na as _,Nb as k,Pa as v,Ra as g,Rb as R,S as x,Sa as f,T as I,a as b,ab as r,b as h,bb as C,db as E,ja as c,k as D,n as O,na as u,p as P,sa as w,xa as l}from"./chunk-T7TK6TUY.js";function tt(e,o){if(e&1&&(n(0,"div",14)(1,"p"),r(2),i()()),e&2){let t=f();c(2),E("Alumno: ",t.alumno.nombre," ",t.alumno.apellido,"")}}function et(e,o){e&1&&(n(0,"th",15),r(1,"Nombre del Curso"),i())}function nt(e,o){if(e&1&&(n(0,"td",16),r(1),i()),e&2){let t=o.$implicit;c(),C(t.nombre)}}function it(e,o){e&1&&(n(0,"th",15),r(1,"Profesor"),i())}function ot(e,o){if(e&1&&(n(0,"td",16),r(1),i()),e&2){let t=o.$implicit;c(),C(t.profesor)}}function rt(e,o){e&1&&(n(0,"th",15),r(1,"Duraci\xF3n (horas)"),i())}function at(e,o){if(e&1&&(n(0,"td",16),r(1),i()),e&2){let t=o.$implicit;c(),C(t.duracion)}}function st(e,o){e&1&&(n(0,"th",15),r(1,"Cupos Disponibles"),i())}function ct(e,o){if(e&1&&(n(0,"td",16),r(1),i()),e&2){let t=o.$implicit;c(),C(t.cuposDisponibles)}}function lt(e,o){e&1&&(n(0,"th",15),r(1,"Acciones"),i())}function mt(e,o){if(e&1){let t=v();n(0,"button",20),g("click",function(){x(t);let s=f().$implicit,p=f();return I(p.inscribirse(s))}),n(1,"mat-icon"),r(2,"how_to_reg"),i(),r(3," Inscribirse "),i()}}function pt(e,o){if(e&1){let t=v();n(0,"button",21),g("click",function(){x(t);let s=f().$implicit,p=f();return I(p.desinscribirse(s))}),n(1,"mat-icon"),r(2,"person_remove"),i(),r(3," Desinscribirse "),i()}}function ut(e,o){e&1&&(n(0,"span",22),r(1," Sin cupos disponibles "),i())}function dt(e,o){if(e&1&&(n(0,"td",16),l(1,mt,4,0,"button",17)(2,pt,4,0,"button",18)(3,ut,2,0,"span",19),i()),e&2){let t=o.$implicit;c(),m("ngIf",!t.inscrito&&t.cuposDisponibles>0),c(),m("ngIf",t.inscrito),c(),m("ngIf",!t.inscrito&&t.cuposDisponibles===0)}}function _t(e,o){e&1&&M(0,"tr",23)}function ft(e,o){e&1&&M(0,"tr",24)}var Tt=(()=>{class e{constructor(t,a,s,p,Z){this.router=t,this.route=a,this.cursosService=s,this.inscripcionesService=p,this.alumnosService=Z,this.displayedColumns=["nombre","profesor","duracion","cuposDisponibles","acciones"],this.cursosDisponibles=[],this.alumnoId=null,this.alumno=null,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.route.params.subscribe(t=>{this.alumnoId=t.id?+t.id:null,this.alumnoId?this.cargarDatosAlumno():this.cargarCursosDisponibles()}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}cargarDatosAlumno(){if(this.alumnoId){let t=this.alumnosService.getAlumnoById(this.alumnoId);t?(this.alumno=t,this.cargarCursosDisponibles()):this.router.navigate(["/alumnos"])}}cargarCursosDisponibles(){this.subscriptions.push(this.cursosService.getCursos().pipe(S(t=>this.alumnoId?P(t.map(a=>this.inscripcionesService.estaInscrito(a.id,this.alumnoId).pipe(O(s=>h(b({},a),{inscrito:s,cuposDisponibles:a.cupo-(a.alumnos?.length||0)}))))):D(t.map(a=>h(b({},a),{inscrito:!1,cuposDisponibles:a.cupo-(a.alumnos?.length||0)}))))).subscribe(t=>{this.cursosDisponibles=t}))}inscribirse(t){this.alumnoId&&t.cuposDisponibles>0&&!t.inscrito&&this.inscripcionesService.inscribirAlumno(t.id,this.alumnoId).subscribe(()=>{this.cargarCursosDisponibles()})}desinscribirse(t){this.alumnoId&&t.inscrito&&this.inscripcionesService.desinscribirAlumno(t.id,this.alumnoId).subscribe(()=>{this.cargarCursosDisponibles()})}volver(){this.router.navigate(["/alumnos"])}static{this.\u0275fac=function(a){return new(a||e)(u(k),u(T),u(X),u(Y),u(W))}}static{this.\u0275cmp=w({type:e,selectors:[["app-lista-inscripciones"]],decls:27,vars:5,consts:[[1,"container"],["class","alumno-info",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","profesor"],["matColumnDef","duracion"],["matColumnDef","cuposDisponibles"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"actions"],["mat-button","","color","primary",3,"click"],[1,"alumno-info"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["class","no-cupos",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"no-cupos"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&(n(0,"div",0)(1,"h2"),r(2),i(),l(3,tt,3,2,"div",1),n(4,"table",2),d(5,3),l(6,et,2,0,"th",4)(7,nt,2,1,"td",5),_(),d(8,6),l(9,it,2,0,"th",4)(10,ot,2,1,"td",5),_(),d(11,7),l(12,rt,2,0,"th",4)(13,at,2,1,"td",5),_(),d(14,8),l(15,st,2,0,"th",4)(16,ct,2,1,"td",5),_(),d(17,9),l(18,lt,2,0,"th",4)(19,dt,4,3,"td",5),_(),l(20,_t,1,0,"tr",10)(21,ft,1,0,"tr",11),i(),n(22,"div",12)(23,"button",13),g("click",function(){return s.volver()}),n(24,"mat-icon"),r(25,"arrow_back"),i(),r(26," Volver a la lista de alumnos "),i()()()),a&2&&(c(2),C(s.alumno?"Inscripciones a Cursos":"Lista de Inscripciones"),c(),m("ngIf",s.alumno),c(),m("dataSource",s.cursosDisponibles),c(16),m("matHeaderRowDef",s.displayedColumns),c(),m("matRowDefColumns",s.displayedColumns))},dependencies:[L,y,R,U,j,B,q,F,z,G,N,J,K,Q,H,A,$,V],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;font-size:24px}.container[_ngcontent-%COMP%]   .alumno-info[_ngcontent-%COMP%]{margin-bottom:20px;padding:10px;background-color:#f5f5f5;border-radius:4px}.container[_ngcontent-%COMP%]   .alumno-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#666}.container[_ngcontent-%COMP%]   .mat-elevation-z8[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;border-radius:4px;overflow:hidden}.container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.container[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#333;font-weight:600;padding:12px 16px}.container[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:12px 16px}.container[_ngcontent-%COMP%]   .mat-column-acciones[_ngcontent-%COMP%]{width:150px;text-align:center}.container[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]{min-width:130px}.container[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:8px}.container[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-start}.container[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px}.container[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px;vertical-align:middle}.container[_ngcontent-%COMP%]   .no-cupos[_ngcontent-%COMP%]{color:#f44336;font-style:italic}.container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:20px}"]})}}return e})();export{Tt as ListaInscripcionesComponent};
